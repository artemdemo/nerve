/*! nerve - v0.1.0 - 2015-06-22 */var nerve;!function(a){function b(a){var b=null;if(!a.hasOwnProperty("channel")||!a.hasOwnProperty("callback")||!f(a.callback))throw Error("A channel and a callback must be specified");b=a.hasOwnProperty("scope")?a.scope||null:null,g.hasOwnProperty(a.channel)||(g[a.channel]={}),a.hasOwnProperty("route")||(a.route=h),g[a.channel].hasOwnProperty(a.route)||(g[a.channel][a.route]=[]),e(b,g[a.channel][a.route])||g[a.channel][a.route].push({caller:b,callback:a.callback})}function c(a){if(!a.hasOwnProperty("channel"))throw Error("A channel must be specified");if(a.hasOwnProperty("route")||(a.route=h),g.hasOwnProperty(a.channel)&&g[a.channel].hasOwnProperty(a.route)){a.hasOwnProperty("context")||(a.context=null);for(var b=g[a.channel][a.route],c=0,d=b.length;d>c;c++)!function(b,c,d){var e=setTimeout(function(){try{g[b][c][d].callback.call(g[b][c][d].caller,a.context),clearTimeout(e)}catch(f){}})}(a.channel,a.route,c)}}function d(a){if(!a.hasOwnProperty("channel"))throw Error("A channel must be specified");if(a.hasOwnProperty("route")||(a.route=h),a.hasOwnProperty("scope")||(a.scope=null),g.hasOwnProperty(a.channel)){if(!g[a.channel].hasOwnProperty(a.route))return;for(var b=0,c=g[a.channel][a.route].length;c>b;b++)g[a.channel][a.route][b].caller===a.scope&&delete g[a.channel][a.route][b]}}function e(a,b){if(!b)return null;for(var c=0,d=b.length;d>c;c++)if(console.log(b[c]),b[c].caller===a)return b[c];return null}function f(a){var b={};return a&&"[object Function]"===b.toString.call(a)}var g={},h="root";a.on=b,a.send=c,a.off=d}(nerve||(nerve={}));